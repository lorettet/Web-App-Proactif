<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Inscription - Proact'IF</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./css/firstStyle.css"/>
    </head>
    <body>
        <form id="formulaire" method="POST" action="./ActionServlet">
            <div>
                <fieldset>
                    <legend>Inscription</legend>
                    <div>Civilité : <input type="radio" name="Civilite" value="H" checked="checked"/>Monsieur
                        <input type="radio" name="Civilite" value="F"/>Madame</div>
                    <div><input name="action" type="hidden" value="signup" /></div>
                    <div>Nom : <input type="text" name="Nom" required="required"/></div>
                    <div>Prénom : <input type="text" name="Prenom" required="required"/></div>
                    <div>Adresse email : <input type="email" name="Mail" required="required"/></div>
                    <div>Téléphone : <input type="tel" name="Telephone" required="required"/></div>
                    <div>Date de naissance : <input type="date" name="DateNaissance" required="required"/></div>
                    <div>Ville : <input type="text" name="Ville" required="required"/></div>
                    <div>Code postal : <input type="number" name="CodePostal" required="required"/></div>
                    <div>Rue et numéro : <textarea name="Adresse" required="required"/></textarea></div>
                    <div>Complément d'adresse : <textarea name="ComplementAdresse"></textarea></div>
                    <div>Mot de passe : <input type="password" name="MotDePasse" id="MotDePasse" required="required"/></div>
                    <div>Confirmation du mot de passe : <input type="password" name="ConfirmationMDP" required="required"/></div>
                    <div><input type="checkbox" name="CGV" value="CGV" required="required"/>J'ai lu et j'accepte les Conditions Générales de Vente</div>
                    <div><input type="checkbox" name="NotRobot" value="NotRobot" required="required"/>Je ne suis pas un robot</div>
                    <div><input type="submit" value="Valider l'inscription"></div>
                </fieldset>
            </div>
        </form>
        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.js"></script>
        <script>
            $( "#formulaire" ).validate({
                rules: {
                    MotDePasse: "required",
                    ConfirmationMDP: {
                        equalTo: "#MotDePasse"
                    }
                }
            });
            $(function(){
                $('#formulaire').submit( function(event){
                    $.ajax({
                    url: $('#formulaire').attr('action'),
                    type: 'POST',
                    data: $('#formulaire').serialize(), 
                }).done(function(data){
                        if(data === "ok"){
                            alert("Vous êtes enregistré, veuillez vous connecter");
                            window.location =  "./connexion.html";
                        }else{
                            if(document.getElementById('errorField')){
                                $("#errorField").html("<fieldset>"+data+"</fieldset>");
                            }else {
                                $("#formulaire").prepend("<div id='errorField'><fieldset>"+data+"</fieldset></div>");
                            }
                        }
                    });
                    event.preventDefault();
                });
            });
        </script>
    </body>
</html>
